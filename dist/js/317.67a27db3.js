"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[317],{4317:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var s=r(3396),d=r(7139),a=r(9242);const i={class:"container"},l={class:"row mt-5"},o={class:"table mt-4"},n=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"120"},"購買時間"),(0,s._)("th",{width:"120"},"Email"),(0,s._)("th",{width:"300"},"購買項目"),(0,s._)("th",{width:"120"},"應付金額"),(0,s._)("th",{width:"120"},"是否已付款"),(0,s._)("th",{width:"120"},"編輯")])],-1),c={class:"text-right"},u={class:"text-right"},h={key:0,class:"text-success"},p={key:1,class:"text-muted"},m={class:"btn-group"},_=["onClick"],b=["onClick"];function w(e,t,r,w,g,v){const O=(0,s.up)("OrderModal"),f=(0,s.up)("DelModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",i,[(0,s._)("div",l,[(0,s._)("table",o,[n,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(g.orders,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,(0,d.zw)(e.$filters.date(t.create_at)),1),(0,s._)("td",null,(0,d.zw)(t.user.email),1),(0,s._)("td",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.products,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},(0,d.zw)(e.product.title)+" 數量："+(0,d.zw)(e.qty)+" "+(0,d.zw)(e.product.unit),1)))),128))]),(0,s._)("td",u,(0,d.zw)(e.$filters.currency(t.total)),1),(0,s._)("td",null,[t.is_paid?((0,s.wg)(),(0,s.iD)("span",h,"已付款")):((0,s.wg)(),(0,s.iD)("span",p,"未付款"))]),(0,s._)("td",null,[(0,s._)("div",m,[(0,s._)("button",{class:"btn btn-outline-primary btn-sm",onClick:(0,a.iM)((e=>v.openModal(t)),["prevent"])},"檢視",8,_),(0,s._)("button",{class:"btn btn-outline-danger btn-sm",onClick:(0,a.iM)((e=>v.openDelOrderModal(t)),["prevent"])}," 刪除 ",8,b)])])])))),128))])])])]),(0,s.Wm)(O,{ref:"orderModal",order:g.tempOrder,onReviseItem:v.reviseItem},null,8,["order","onReviseItem"]),(0,s.Wm)(f,{item:g.tempOrder,ref:"delModal",onDelItem:v.delOrder},null,8,["item","onDelItem"])],64)}const g={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},v={class:"modal-dialog",role:"document"},O={class:"modal-content border-0"},f={class:"modal-header bg-dark text-white"},M={class:"modal-title"},k=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),y={class:"modal-body"},D={class:"mb-3"},$={class:"mb-3"},x={class:"form-check"},z=(0,s._)("label",{class:"form-check-label",for:"is_paid"}," 是否付款 ",-1),C={class:"modal-footer"},I=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function H(e,t,r,i,l,o){return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",v,[(0,s._)("div",O,[(0,s._)("div",f,[(0,s._)("h5",M,[(0,s._)("span",null,"檢視 "+(0,d.zw)(l.user),1)]),k]),(0,s._)("div",y,[(0,s._)("div",D,[(0,s.Uk)(" 訂單列表："),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tempOrder.products,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t},(0,d.zw)(e.product.title)+" 數量："+(0,d.zw)(e.qty)+" "+(0,d.zw)(e.product.unit),1)))),128))]),(0,s._)("div",$,[(0,s._)("div",x,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>l.tempOrder.is_paid=e),true:1,false:0,id:"is_paid"},null,512),[[a.e8,l.tempOrder.is_paid]]),z])])]),(0,s._)("div",C,[I,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=t=>e.$emit("revise-item",l.tempOrder))},"確認 ")])])])],512)}var Y=r(1339),Z={props:{order:{type:Object,default(){return{}}}},data(){return{modal:{},tempOrder:{},user:""}},watch:{order(){this.tempOrder=this.order,this.user=this.tempOrder.user.name,console.log("tempOrder",this.tempOrder.is_paid)}},mixins:[Y.Z]},K=r(89);const j=(0,K.Z)(Z,[["render",H]]);var q=j,R=r(5919),U={data(){return{orders:[],pagination:{},tempOrder:{}}},components:{OrderModal:q,DelModal:R.Z},inject:["emitter"],methods:{getOrders(){const e="https://vue3-course-api.hexschool.io/api/chaichai_api/admin/orders";this.$http.get(e).then((e=>{e.data.success&&(this.orders=e.data.orders,console.log("order",this.orders),this.pagination=e.data.pagination)}))},openModal(e){this.tempOrder={...e};const t=this.$refs.orderModal;t.showModal()},reviseItem(e){this.tempOrder=e;const t=this.$refs.orderModal,r=`https://vue3-course-api.hexschool.io/api/chaichai_api/admin/order/${this.tempOrder.id}`;this.$http.put(r,{data:this.tempOrder}).then((e=>{e.data.success&&(t.hideModal(),this.getOrders())}))},openDelOrderModal(e){this.tempOrder={...e};const t=this.$refs.delModal;t.showModal()},delOrder(){const e=`https://vue3-course-api.hexschool.io/api/chaichai_api/admin/order/${this.tempOrder.id}`;this.$http.delete(e).then((e=>{if(e.data.success){console.log(e);const t=this.$refs.delModal;t.hideModal(),this.$httpMessageState(e,e.data.message),this.getOrders()}}))}},created(){this.getOrders()}};const W=(0,K.Z)(U,[["render",w]]);var E=W}}]);
//# sourceMappingURL=317.67a27db3.js.map