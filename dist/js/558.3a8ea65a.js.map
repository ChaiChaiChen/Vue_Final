{"version":3,"file":"js/558.3a8ea65a.js","mappings":"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","sources":["webpack://vue-final/./src/views/UserCheckout.vue","webpack://vue-final/./src/views/UserCheckout.vue?0c02"],"sourcesContent":["<!-- eslint-disable vuejs-accessibility/form-control-has-label -->\n<!-- eslint-disable vuejs-accessibility/label-has-for -->\n<template>\n  <div class=\"banner\">\n      <img src=\"https://storage.googleapis.com/vue-course-api.appspot.com/chaichai_api/1703908235018.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=HMirTBLqIDnBljng1KfXDplpROeMbDTPnuByMw7zyhfEA68A1cJ50BtPiG5fy%2BK0tNn%2Fp2LrpF01mQN7L0Q0eJxm19w6GYS0BiabUcYqF4gy0iYbvPB7qgrmG1duyOETR16Ms8zwRkt2hd1oM%2F3Fbi78sn%2FRjheIcp8X%2BdVQjvdaINQsxsn5GKyvFHjdfG8QzqmI4%2FR2WuDhWzZNQbfqGX49PM0H%2Bedb%2FuABPzfu7Zgknnxx6SBoj4tLIiJFByfKEbeu%2F6gEZh1mOoEmspR84XpnGVedOA9AJQm8I9c%2FK9bTcZbtG8GshqrXNR7PU%2FzOBv1%2FdANSkDZQXhhrYQqb5Q%3D%3D\" class=\"d-block w-100\" alt=\"...\">\n\n  </div>\n    <div class=\"my-5 row justify-content-center\">\n  <div class=\"col-md-8\">\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th></th>\n          <th>品名</th>\n          <th style=\"width: 100px\">數量</th>\n          <th>單價</th>\n        </tr>\n      </thead>\n      <tbody>\n          <tr v-for=\"cart in cartsList.carts\" :key=\"cart.Id\">\n          <td>\n            <button class=\"btn btn-outline-danger btn-sm\"\n             type=\"button\" @click=\"deleteCartItem(cart.id)\">\n              <i class=\"bi bi-x\"></i>\n            </button>\n          </td>\n          <td>\n            {{ cart.product.title }}\n          </td>\n          <td>\n            <div class=\"input-group input-group-sm\">\n              <input type=\"number\" class=\"form-control\" min=\"1\"\n                    v-model.number=\"cart.qty\" @change=\"updateCart(cart)\">\n              <div class=\"input-group-text\">/ {{ cart.product.unit }}</div>\n            </div>\n          </td>\n          <td class=\"text-end\">\n                  <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價：</small>\n                  {{ $filters.currency(cart.final_total) }}\n                </td>\n          </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ (cartsList.total) }}</td>\n            </tr>\n            <tr v-if=\"cartsList.final_total !== cartsList.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ (cartsList.final_total) }}</td>\n            </tr>\n      </tfoot>\n    </table>\n    <div class=\"input-group mb-3 input-group-sm\">\n            <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n                套用優惠碼\n              </button>\n            </div>\n          </div>\n</div>\n</div>\n  <div class=\"my-5 row justify-content-center\" v-if=\"cartsList.total > 0\">\n      <Form class=\"col-md-6\" v-slot=\"{ errors }\"\n            @submit=\"createOrder\">\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <Field id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\n                   :class=\"{ 'is-invalid': errors['email'] }\"\n                   placeholder=\"請輸入 Email\" rules=\"email|required\"\n                   v-model=\"form.user.email\"></Field>\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\n          <Field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\n                   :class=\"{ 'is-invalid': errors['姓名'] }\"\n                   placeholder=\"請輸入姓名\" rules=\"required\"\n                   v-model=\"form.user.name\"></Field>\n          <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\n          <Field id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\n                   :class=\"{ 'is-invalid': errors['電話'] }\"\n                   placeholder=\"請輸入電話\" rules=\"required\"\n                   v-model=\"form.user.tel\"></Field>\n          <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\n          <Field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\n                   :class=\"{ 'is-invalid': errors['地址'] }\"\n                   placeholder=\"請輸入地址\" rules=\"required\"\n                   v-model=\"form.user.address\"></Field>\n          <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea name=\"\" id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\"\n                    v-model=\"form.message\"></textarea>\n        </div>\n        <div class=\"text-end\">\n          <button class=\"btn btn-danger\">送出訂單</button>\n        </div>\n      </Form>\n    </div>\n  </template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      productList: [],\n      cartsList: [],\n      status: {\n        loadingItem: '', // 對應品項id\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      cart: {},\n      coupon_code: '',\n    };\n  },\n  methods: {\n    getProduct(id) {\n      this.$router.push(`/user/product/${id}`);\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((response) => {\n        console.log(response);\n        this.cartsList = response.data.data;\n        console.log('cartsList', this.cartsList);\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon }).then((response) => {\n        this.$httpMessageState(response, '加入優惠券');\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order })\n        .then((res) => {\n          console.log(res);\n          this.$router.push(`pay/${res.data.orderId}`);\n        });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.getCart();\n      });\n    },\n    deleteCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.$http.delete(url).then((response) => {\n        console.log(response);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n  },\n\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=15b305a5\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","src","alt","style","_hoisted_7","colspan","for","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","_renderList","$data","cartsList","carts","cart","key","Id","type","onClick","$event","$options","deleteCartItem","id","_toDisplayString","product","title","_hoisted_9","min","qty","onChange","updateCart","_hoisted_11","unit","_hoisted_12","final_total","total","_hoisted_13","_ctx","$filters","currency","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","coupon_code","placeholder","_hoisted_20","_cache","args","addCouponCode","_hoisted_21","_createVNode","_component_Form","onSubmit","createOrder","errors","_hoisted_22","_hoisted_23","_component_Field","name","_normalizeClass","rules","form","user","email","_component_ErrorMessage","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","tel","_hoisted_28","_hoisted_29","address","_hoisted_30","_hoisted_31","cols","rows","message","_hoisted_32","data","productList","status","loadingItem","methods","getProduct","this","$router","push","getCart","url","$http","get","then","response","console","log","coupon","code","isLoading","post","$httpMessageState","order","res","orderId","item","product_id","put","delete","created","__exports__","render"],"sourceRoot":""}