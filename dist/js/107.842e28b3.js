"use strict";(self["webpackChunkvue_final"]=self["webpackChunkvue_final"]||[]).push([[107],{7313:function(t,s,e){var i=e(1076),c=e(1020);s.Z=(0,c.Q_)("productStore",{state:()=>({products:[]}),getters:{productList:t=>t.products},actions:{getProducts(){return new Promise((async(t,s)=>{const e="https://vue3-course-api.hexschool.io/api/chaichai_api/products/all";try{const s=await i.Z.get(e);console.log(s),this.products=s.data.products,t()}catch(c){console.log(c),s()}}))}}})},4107:function(t,s,e){e.r(s),e.d(s,{default:function(){return dt}});var i=e(3396),c=e(7139);const l={class:"container-fluid"},o={class:"row justify-content-center align-items-center bg-gray mt-5"},a=(0,i._)("div",{class:"coupon-container bg-nav text-theme text-center d-flex align-items-center justify-content-center mt-lg-4 mt-2"},[(0,i._)("div",{class:"coupon-content"},"現在輸入優惠碼：95%  享有95折優惠")],-1),n=(0,i._)("div",{class:"col-md-12 col-lg-1"},null,-1),r={class:"col-md-12 col-lg-5 mt-5 row justify-content-center"},d=["src"],g={class:"col-md-12 col-lg-3 row mt-lg-5 ms-lg-3"},u=["onMouseover"],m=["src"],h=(0,i._)("div",{class:"col-md-12 col-lg-2"},null,-1),p={class:"row justify-content-center gx-0"},v={class:"col-lg-4 col-12 mt-4"},_={class:"font-md-l fw-bold mb-3"},w={class:"fs-5 text-theme"},b={class:"col-lg-4 col-12 mt-4 row justify-content-center"},f={class:"btn-group product-btn",role:"group","aria-label":"Basic example"},x=["disabled"],P={key:0,class:"spinner-grow text-red spinner-grow-sm"},y=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),k=[y],I=["disabled"],L=(0,i._)("i",{class:"bi bi-share"},null,-1),D={class:"row justify-content-center align-items-center product-content"},C={class:"mt-3"},$={class:"row align-items-center"},j={class:"col-md-6 d-flex justify-content-center gx-0 order-2 order-md-1"},z={class:"d-flex flex-column ms-4 content lh-lg"},M={class:"col-md-6 gx-0 order-1 order-md-2"},U=["src"],H={class:"row align-items-center bg-gray"},S={class:"col-md-6 gx-0"},Z=["src"],q={class:"col-md-6 d-flex gx-0"},F={class:"d-flex flex-column justify-content-center content ms-4 ms-lg-5 lh-lg"},Y={class:"row align-items-center"},K={class:"col-md-6 d-flex justify-content-center gx-0 order-2 order-md-1"},E={class:"d-flex flex-column ms-4 content lh-lg"},T={class:"col-md-6 gx-0 order-1 order-md-2"},B=["src"],G={key:0,class:"container mt-5 mb-5"},Q={class:"row"},W=(0,i._)("h3",{class:"text-center mb-4"},"相關產品",-1),A={class:"card rounded-0"},J=["onMouseenter","onMouseleave","onClick"],N=["src"],O=["src"],R={class:"card-body text-center bg-card"},V={class:"card-img-title-lg"},X={class:"card-text"},tt=["disabled","onClick"],st={key:0,class:"spinner-grow text-red spinner-grow-sm"},et=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),it=[et];function ct(t,s,e,y,et,ct){const lt=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(lt,{active:et.isLoading},null,8,["active"]),(0,i._)("div",l,[(0,i._)("div",o,[a,n,(0,i._)("div",r,[(0,i._)("img",{src:et.enterImage,alt:"",class:"img-fluid rounded mainImg"},null,8,d)]),(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(et.imagesList,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-lg-6 col-3 secImg-box mt-4",key:t},[(0,i._)("a",{onMouseover:s=>ct.changeEnterImage(t)},[(0,i._)("img",{src:t,class:"img-fluid rounded",alt:""},null,8,m)],40,u)])))),128))]),h,(0,i._)("div",p,[(0,i._)("div",v,[(0,i._)("h4",_,[(0,i._)("strong",null,(0,c.zw)(et.tempProduct.title),1)]),(0,i._)("p",w,"售價：$"+(0,c.zw)(et.tempProduct.price),1)]),(0,i._)("div",b,[(0,i._)("div",f,[(0,i._)("button",{class:"btn btn-btn-bg btn-xl btn-add-view m-1",disabled:this.status.loadingItem===et.tempProduct.id,onClick:s[0]||(s[0]=t=>ct.addCart(et.tempProduct.id))},[this.status.loadingItem===et.tempProduct.id?((0,i.wg)(),(0,i.iD)("div",P,k)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車")],8,x),(0,i._)("button",{class:"btn btn-btn-share-bg btn-share-view btn-xl m-1",onClick:s[1]||(s[1]=(...t)=>ct.shareUrl&&ct.shareUrl(...t)),disabled:this.status.loadingItem===et.tempProduct.id},[(0,i.Uk)(" 分享 "),L],8,I)])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(et.contentList,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-lg-3 text-center my-3 border bg-white",key:t},[(0,i._)("div",D,[(0,i._)("p",C,(0,c.zw)(t),1)])])))),128))]),(0,i._)("div",$,[(0,i._)("div",j,[(0,i._)("div",z,[(0,i._)("p",null,(0,c.zw)(et.descriptionList[0]),1)])]),(0,i._)("div",M,[(0,i._)("img",{src:et.images[2],alt:"",class:"img-fluid"},null,8,U)])]),(0,i._)("div",H,[(0,i._)("div",S,[(0,i._)("img",{src:et.images[3],alt:"",class:"img-fluid"},null,8,Z)]),(0,i._)("div",q,[(0,i._)("div",F,[(0,i._)("p",null,(0,c.zw)(et.descriptionList[1]),1)])])]),(0,i._)("div",Y,[(0,i._)("div",K,[(0,i._)("div",E,[(0,i._)("p",null,(0,c.zw)(et.descriptionList[2]),1)])]),(0,i._)("div",T,[(0,i._)("img",{src:et.images[4],alt:"",class:"img-fluid"},null,8,B)])])]),et.relatedProducts.length>0?((0,i.wg)(),(0,i.iD)("div",G,[(0,i._)("div",Q,[W,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(et.relatedProducts,((s,e)=>((0,i.wg)(),(0,i.iD)("div",(0,i.dG)({class:"col-sm-12 col-md-6 col-xl-3 py-2",key:s.Id},s),[(0,i._)("div",A,[(0,i._)("div",{class:"card border border-white text-white text-left imgHover",onMouseenter:t=>ct.enterFun(e),onMouseleave:t=>ct.leaveFun(e),onClick:t=>ct.relatedProduct(s.id)},[et.showImage||et.n!=e?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.images[0],alt:"",class:"img-cover imageSize",height:"300"},null,8,N)):((0,i.wg)(),(0,i.iD)("img",{key:1,src:s.images[1],alt:"",class:"img-cover imageSize",height:"300"},null,8,O))],40,J),(0,i._)("div",R,[(0,i._)("h5",V,(0,c.zw)(s.title),1),(0,i._)("p",X,"售價："+(0,c.zw)(t.$filters.currency(s.price)),1),(0,i._)("button",{class:"btn btn-btn-bg btn-add-view btn-xl",disabled:this.status.loadingItem===s.id,onClick:t=>ct.addCart(s.id)},[this.status.loadingItem===s.id?((0,i.wg)(),(0,i.iD)("div",st,it)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車")],8,tt)])])],16)))),128))])])):(0,i.kq)("",!0)],64)}e(560);var lt=e(1020),ot=e(7313),at={data(){return{isLoading:!1,tempProduct:{},enterImage:"",id:"",status:{loadingItem:""},images:[],imagesList:[],contentList:{},descriptionList:{},relatedProducts:[],showImage:!0,n:0,share:""}},inject:["emitter"],computed:{...(0,lt.rn)(ot.Z,["productList"])},methods:{...(0,lt.nv)(ot.Z,["getProducts"]),getProduct(){const t=`https://vue3-course-api.hexschool.io/api/chaichai_api/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.tempProduct=t.data.product,this.enterImage=this.tempProduct.imageUrl,this.images=this.tempProduct.images,this.imagesList=this.tempProduct.images.slice(5);const{content:s}=this.tempProduct;this.contentList=s.split("\n");const{description:e}=this.tempProduct;this.descriptionList=e.split("；"),this.same(this.tempProduct.category),this.isLoading=!1,this.$scroll.scrollTop()}))},addCart(t){const s="https://vue3-course-api.hexschool.io/api/chaichai_api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(s,{data:e}).then((t=>{this.status.loadingItem="",console.log("Products",t),this.$httpMessageState(t,"加入購物車")}))},same(t){this.relatedProducts=this.productList.filter((s=>s.category===t&&s.id!==this.tempProduct.id)),this.relatedProducts=this.relatedProducts.slice(0,4)},relatedProduct(t){this.$router.push(`/product/${t}`),this.id=t,this.getProduct()},enterFun(t){this.showImage=!1,this.n=t},leaveFun(t){this.showImage=!0,this.n=t},shareUrl(){navigator.clipboard.writeText(window.location.href).then((()=>{const t={data:{success:!0}};this.$httpMessageState(t,"複製連結")}))},changeEnterImage(t){this.enterImage=t}},created(){this.getProducts(),this.id=this.$route.params.productId,this.getProduct();let t=0;setInterval((()=>{this.enterImage=this.imagesList[t],t+=1,t>=this.imagesList.length&&(t=0)}),5e3)}},nt=e(89);const rt=(0,nt.Z)(at,[["render",ct]]);var dt=rt}}]);
//# sourceMappingURL=107.842e28b3.js.map