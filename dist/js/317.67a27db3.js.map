{"version":3,"file":"js/317.67a27db3.js","mappings":"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","sources":["webpack://vue-final/./src/views/backend/Orders.vue","webpack://vue-final/./src/components/OrderModal.vue","webpack://vue-final/./src/components/OrderModal.vue?b91a","webpack://vue-final/./src/views/backend/Orders.vue?657d"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"container\">\n    <div class=\"row mt-5\">\n    <table class=\"table mt-4\">\n        <thead>\n            <tr>\n                <th width=\"120\">購買時間</th>\n                <th width=\"120\">Email</th>\n                <th width=\"300\">購買項目</th>\n                <th width=\"120\">應付金額</th>\n                <th width=\"120\">是否已付款</th>\n                <th width=\"120\">編輯</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"order in orders\" :key=\"order.id\">\n                <td>{{ $filters.date(order.create_at) }}</td>\n                <td>{{ order.user.email }}</td>\n                <td class=\"text-right\">\n                  <div v-for=\"(product, i ) in order.products\" :key=\"i\">\n                    {{ product.product.title }}\n                    數量：{{ product.qty }}\n                    {{ product.product.unit }}\n                  </div>\n                </td>\n                <td class=\"text-right\">{{ $filters.currency(order.total) }}</td>\n                <td>\n                    <span class=\"text-success\" v-if=\"order.is_paid\">已付款</span>\n                    <span class=\"text-muted\" v-else>未付款</span>\n                </td>\n                <td>\n                    <div class=\"btn-group\">\n                        <button class=\"btn btn-outline-primary btn-sm\"\n                        @click.prevent=\"openModal(order)\"\n                        >檢視</button>\n                    <button class=\"btn btn-outline-danger btn-sm\"\n                     @click.prevent=\"openDelOrderModal(order)\">\n                      刪除\n                    </button>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n  </div>\n  </div>\n  <OrderModal ref=\"orderModal\" :order=\"tempOrder\" @revise-item=\"reviseItem\"></OrderModal>\n  <DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\"></DelModal>\n</template>\n<script>\nimport OrderModal from '../../components/OrderModal.vue';\nimport DelModal from '../../components/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      orders: [],\n      pagination: {},\n      tempOrder: {},\n    };\n  },\n  components: {\n    OrderModal,\n    DelModal,\n  },\n  inject: ['emitter'],\n  methods: {\n    getOrders() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.orders = res.data.orders;\n            console.log('order', this.orders);\n            this.pagination = res.data.pagination;\n          }\n        });\n    },\n    openModal(order) {\n      this.tempOrder = { ...order };\n      const orderComponent = this.$refs.orderModal;\n      orderComponent.showModal();\n    },\n    reviseItem(item) {\n      this.tempOrder = item;\n      const orderComponent = this.$refs.orderModal;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.$http.put(url, { data: this.tempOrder }).then((response) => {\n        if (response.data.success) {\n          orderComponent.hideModal();\n          this.getOrders();\n        }\n      });\n    },\n    openDelOrderModal(item) {\n      this.tempOrder = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    delOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.$http.delete(url).then((response) => {\n        if (response.data.success) {\n          console.log(response);\n          const delComponent = this.$refs.delModal;\n          delComponent.hideModal();\n          this.$httpMessageState(response, response.data.message);\n          this.getOrders();\n        }\n      });\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n};\n</script>\n","<!-- eslint-disable vuejs-accessibility/label-has-for -->\n<template>\n    <div class=\"modal fade\" id=\"orderModal\" tabindex=\"-1\" role=\"dialog\"\n         aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-dark text-white\">\n            <h5 class=\"modal-title\">\n              <span>檢視 {{ user }}</span>\n            </h5>\n            <button type=\"button\" class=\"btn-close\"\n                    data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n                  <div class=\"mb-3\">\n            訂單列表：<div v-for=\"(product, i ) in tempOrder.products\" :key=\"i\">\n                    {{ product.product.title }}\n                    數量：{{ product.qty }}\n                    {{ product.product.unit }}\n                  </div>\n                  </div>\n                  <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    v-model=\"tempOrder.is_paid\"\n                    :true=\"1\"\n                    :false=\"0\"\n                    id=\"is_paid\"\n                  />\n                  <label class=\"form-check-label\" for=\"is_paid\">\n                    是否付款\n                  </label>\n                </div>\n              </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\"\n                    data-bs-dismiss=\"modal\">取消\n            </button>\n            <button type=\"button\" class=\"btn btn-primary\"\n                    @click=\"$emit('revise-item',tempOrder)\">確認\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    order: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempOrder: {},\n      user: '',\n    };\n  },\n  watch: {\n    order() {\n      this.tempOrder = this.order;\n      this.user = this.tempOrder.user.name;\n      console.log('tempOrder', this.tempOrder.is_paid);\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=5c0912ee\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=7b1eea1a\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","orders","order","key","id","_toDisplayString","_ctx","$filters","date","create_at","user","email","_hoisted_5","products","product","i","title","qty","unit","_hoisted_6","currency","total","is_paid","_hoisted_7","_hoisted_8","_hoisted_9","onClick","_withModifiers","$event","$options","openModal","_hoisted_10","openDelOrderModal","_hoisted_11","_createVNode","_component_OrderModal","ref","tempOrder","onReviseItem","reviseItem","_component_DelModal","item","onDelItem","delOrder","tabindex","role","type","for","true","false","_hoisted_12","_hoisted_13","_cache","$emit","props","Object","default","data","modal","watch","this","name","console","log","mixins","modalMixin","__exports__","pagination","components","OrderModal","DelModal","inject","methods","getOrders","api","$http","get","then","res","success","orderComponent","$refs","orderModal","showModal","url","put","response","hideModal","delComponent","delModal","delete","$httpMessageState","message","created","render"],"sourceRoot":""}