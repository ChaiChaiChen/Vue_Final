{"version":3,"file":"js/630.0670da0f.js","mappings":"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","sources":["webpack://vue-final/./src/views/backend/Orders.vue","webpack://vue-final/./src/stores/backend/orderStore.js","webpack://vue-final/./src/components/OrderModal.vue","webpack://vue-final/./src/components/OrderModal.vue?b91a","webpack://vue-final/./src/views/backend/Orders.vue?657d"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"container\">\n    <div class=\"row mt-5\">\n    <table class=\"table mt-5 text-center table-radius\">\n        <thead class=\"table-theme\">\n            <tr>\n                <th width=\"120\">購買時間</th>\n                <th width=\"120\">Email</th>\n                <th width=\"300\">購買項目</th>\n                <th width=\"120\">應付金額</th>\n                <th width=\"120\">是否已付款</th>\n                <th width=\"120\">編輯</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"order in orders\" :key=\"order.id\">\n                <td>{{ $filters.date(order.create_at) }}</td>\n                <td>{{ order.user.email }}</td>\n                <td class=\"text-right\">\n                  <div v-for=\"(product, i ) in order.products\" :key=\"i\">\n                    {{ product.product.title }}\n                    數量：{{ product.qty }}\n                    {{ product.product.unit }}\n                  </div>\n                </td>\n                <td class=\"text-right\">{{ $filters.currency(order.total) }}</td>\n                <td>\n                    <span class=\"is-enabled-border is-enabled\" v-if=\"order.is_paid\">已付款</span>\n                    <span class=\"is-enabled-border not-enabled\" v-else>未付款</span>\n                </td>\n                <td>\n                  <button class=\"btn btn-primary\"\n                  @click.prevent=\"openModal(order)\">\n                  <i class=\"bi bi-pencil-square\"></i></button>\n                  <button class=\"btn btn-danger\"\n                    @click.prevent=\"openDelOrderModal(order)\">\n                    <i class=\"bi bi-trash3\"></i>\n                  </button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n  </div>\n  </div>\n  <OrderModal ref=\"orderModal\" :order=\"tempOrder\" @revise-item=\"reviseItem\"></OrderModal>\n  <DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\"></DelModal>\n  <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"></Pagination>\n</template>\n<script>\nimport { mapState, mapActions } from 'pinia';\nimport orderStore from '@/stores/backend/orderStore';\nimport OrderModal from '../../components/OrderModal.vue';\nimport DelModal from '../../components/DelModal.vue';\nimport Pagination from '../../components/Pagination.vue';\n\nexport default {\n  data() {\n    return {\n      tempOrder: {},\n    };\n  },\n  components: {\n    OrderModal,\n    DelModal,\n    Pagination,\n  },\n  inject: ['emitter'],\n  computed: {\n    ...mapState(orderStore, ['orders', 'pagination']),\n  },\n  methods: {\n    ...mapActions(orderStore, ['getOrders']),\n    openModal(order) {\n      this.tempOrder = { ...order };\n      const orderComponent = this.$refs.orderModal;\n      orderComponent.showModal();\n    },\n    reviseItem(item) {\n      this.tempOrder = item;\n      const orderComponent = this.$refs.orderModal;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.$http.put(url, { data: this.tempOrder }).then((response) => {\n        if (response.data.success) {\n          orderComponent.hideModal();\n          this.getOrders();\n        }\n      });\n    },\n    openDelOrderModal(item) {\n      this.tempOrder = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    delOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.$http.delete(url).then((response) => {\n        if (response.data.success) {\n          console.log(response);\n          const delComponent = this.$refs.delModal;\n          delComponent.hideModal();\n          this.$httpMessageState(response, response.data.message);\n          this.getOrders();\n        }\n      });\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n};\n</script>\n","import axios from 'axios';\nimport { defineStore } from 'pinia';\n\nexport default defineStore('orderStore', {\n  state: () => ({\n    orders: [],\n    pagination: {},\n  }),\n  getters: {\n    productList: (state) => state.products,\n  },\n  actions: {\n    // this\n    getOrders(page = 1) {\n      // eslint-disable-next-line no-async-promise-executor\n      return new Promise(async (resolve, reject) => {\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders/?page=${page}`;\n        try {\n          const res = await axios.get(api);\n          console.log(res);\n          this.orders = res.data.orders;\n          this.pagination = res.data.pagination;\n          resolve();\n        } catch (error) {\n          console.log(error);\n          // eslint-disable-next-line prefer-promise-reject-errors\n          reject();\n        }\n        // axios.get(url).then((response) => {\n        //   this.products = response.data.products;\n        //   console.log(response);\n        // });\n        // axios.get(url).then((response) => {\n        //   this.products = response.data.products;\n        //   console.log(response);\n        // });\n      });\n    },\n  },\n});\n","<!-- eslint-disable vuejs-accessibility/label-has-for -->\n<template>\n    <div class=\"modal fade\" id=\"orderModal\" tabindex=\"-1\" role=\"dialog\"\n         aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-modal-brown text-white\">\n            <h5 class=\"modal-title\">\n              <span>檢視訂單</span>\n            </h5>\n            <button type=\"button\" class=\"btn-close\"\n                    data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n                  <div class=\"mb-3\">\n                    訂購人：{{ user.name }}\n                    </div>\n                  <div class=\"mb-3\">\n                    Email：{{ user.email }}\n                    </div>\n                  <div class=\"mb-3\">\n                    購買時間：{{ $filters.date(tempOrder.create_at) }}\n                    </div>\n                  <div class=\"mb-3\">\n            訂單列表：<div v-for=\"(product, i ) in tempOrder.products\" :key=\"i\">\n                    {{ product.product.title }}\n                    數量：{{ product.qty }}\n                    {{ product.product.unit }}\n                  </div>\n                  </div>\n                  <div class=\"mb-3\">\n                    應付金額：{{ $filters.currency(tempOrder.total) }}\n                    </div>\n                  <div class=\"mb-3\">\n                    留言：{{ tempOrder.message }}\n                    </div>\n                  <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    v-model=\"tempOrder.is_paid\"\n                    :true=\"1\"\n                    :false=\"0\"\n                    id=\"is_paid\"\n                  />\n                  <label class=\"form-check-label\" for=\"is_paid\">\n                    是否付款\n                  </label>\n                </div>\n              </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-secondary\"\n                    data-bs-dismiss=\"modal\">取消\n            </button>\n            <button type=\"button\" class=\"btn btn-primary\"\n                    @click=\"$emit('revise-item',tempOrder)\">確認\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    order: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempOrder: {},\n      user: '',\n    };\n  },\n  watch: {\n    order() {\n      this.tempOrder = this.order;\n      this.user = this.tempOrder.user;\n      console.log('tempOrder', this.tempOrder);\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=fe8f013c\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=5b3206aa\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_hoisted_10","_hoisted_13","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createElementBlock","_Fragment","_renderList","_ctx","orders","order","key","id","_toDisplayString","$filters","date","create_at","user","email","_hoisted_5","products","product","i","title","qty","unit","_hoisted_6","currency","total","is_paid","_hoisted_7","_hoisted_8","onClick","_withModifiers","$event","$options","openModal","openDelOrderModal","_createVNode","_component_OrderModal","ref","$data","tempOrder","onReviseItem","reviseItem","_component_DelModal","item","onDelItem","delOrder","_component_Pagination","pages","pagination","onEmitPages","getOrders","defineStore","state","getters","productList","actions","page","Promise","async","resolve","reject","api","res","axios","get","console","log","this","data","error","tabindex","role","type","for","name","_hoisted_9","_hoisted_11","message","_hoisted_12","true","false","_hoisted_14","_hoisted_15","_hoisted_16","_cache","$emit","props","Object","default","modal","watch","mixins","modalMixin","__exports__","components","OrderModal","DelModal","Pagination","inject","computed","mapState","orderStore","methods","mapActions","orderComponent","$refs","orderModal","showModal","url","$http","put","then","response","success","hideModal","delComponent","delModal","delete","$httpMessageState","created","render"],"sourceRoot":""}